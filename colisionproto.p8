pico-8 cartridge // http://www.pico-8.com
version 33
__lua__
x=0 y=0 w=8 h=8
speed=1
sx=0 sy=0

function _draw()
	cls()
	map()
	spr(2,x,y)
end

function _update60()

	move()
	camera(x-64,y-64)
end




-->8
function check_obstacle(x,y)
	local x_map=flr(x/8)
	local y_map=flr(y/8)
	return fget(mget(x_map,y_map),0)
end

function can_move(x,y,w,h)
	if(check_obstacle(x,y)) return false
	if(check_obstacle(x+w-1,y)) return false
	if(check_obstacle(x,y+h-1)) return false
	if(check_obstacle(x+w-1,y+h-1)) return false
	return true
end

function move()

	if(btn(0)) sx-=speed
	if(btn(1)) sx+=speed
	if(btn(2)) sy-=speed
	if(btn(3)) sy+=speed

	if(can_move(x+sx,y,w,h)) then
		x+=sx
	end
	
	if(can_move(x,y+sy,w,h)) then
		y+=sy
	end
	
	sx=0
	sy=0
end	

__gfx__
00000000666666669999999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666669999999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700666666669999999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000666666669999999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000666666669999999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700666666669999999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666669999999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666669999999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
